<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Cache-Control" content="no-cache"/> 
    <meta http-equiv="Expires" content="0"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <link rel="stylesheet" href="./style/pagestyle3.css" />
    <link rel="stylesheet" href="./style/loginform.css" />
    <link rel="stylesheet" href="./style/defaultsetting.css" />

    <title>Nightmare</title>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
</head>
 
<body>

  <!-- <p class="result" style="font-size: 30px;"></p> -->

   
    <div class="typing-txt"> 
        <ul>
          <li>벌써 예림이를 떠나보낸지 나흘이 되는 날.</li>
          <li>예림이를 떠나보낼 수 없어 장례를 치르는 내내 한 순간도 잠을 이룰 수가 없었다.</li>
          <li>가장 사랑하는 친구이자 동생이고 후배였던 예림이.</li>
        </ul>
    </div> 
   
    <div class="typing">
         <ul>
             <li></li>
             <li></li>
             <li></li>
        </ul>
    </div> 


    <div class="inner_login">
        <div class="login_joy">
    
            <form name="frm1" id="authForm" >
                <fieldset>
                        <div class="box_login">
                            <div class="inp_text">
                                <input type="text" id="inputcode" name="inputcode" placeholder="방의 비밀번호를 입력하세요." onkeydown="Enterkey()" style="text-align: center">
                            </div>
                        </div>
                        <input type="button" class="btn_login" value="제출하기" onclick="ansChk()" style="text-align: center"></input>
                </fieldset>
            </form>
        </div>
    </div>
  
    <audio preload="metadata" autoplay loop id="bgm"> 
        <source src="./sound/doorlock2_sad.mp3" type="audio/mp3"> 
       </audio>
       <button type="button" onclick="aud_play_pause()" style="position: fixed; bottom: 0; right: 0; background-color:rgba(0,0,0,0); border:1px solid black;color:skyblue">BGM</button> 
    
    </body>

    <script type="text/javascript">
     function ansChk() {
           if(document.frm1.inputcode.value == "960903") location.href = './firstpage.html';
     }      
  
     function Enterkey(){
        var key = event.keyCode
        if(key == 13){
           ansChk();
           alert('');
        
        }
     }
     document.documentElement.addEventListener('touchstart', function (event) {
     if (event.touches.length > 1) {
          event.preventDefault(); 
        } 
    }, false);

    var lastTouchEnd = 0; 

    document.documentElement.addEventListener('touchend', function (event) {
     var now = (new Date()).getTime();
     if (now - lastTouchEnd <= 300) {
          event.preventDefault(); 
        } lastTouchEnd = now; 
    }, false);

//----
function aud_play_pause() {
     var myAudio = document.getElementById("bgm");
      if (myAudio.paused) { myAudio.play(); } 
      else { myAudio.pause(); } 
} 



var typingBool = false; 
var typingIdx=0; 
var liIndex = 0;
var liLength = $(".typing-txt>ul>li").length; // 타이핑될 텍스트를 가져온다 
var typingTxt = $(".typing-txt>ul>li").eq(liIndex).text(); 
typingTxt=typingTxt.split(""); // 한글자씩 자른다. 

if(typingBool==false){ // 타이핑이 진행되지 않았다면 
    typingBool=true; 
            var tyInt = setInterval(typing,100); // 반복동작 
    } 
     

function typing(){ 
    $(".typing ul li").removeClass("on");
   $(".typing ul li").eq(liIndex).addClass("on");
  if(typingIdx<typingTxt.length){ // 타이핑될 텍스트 길이만큼 반복 
     $(".typing ul li").eq(liIndex).append(typingTxt[typingIdx]); // 한글자씩 이어준다. 
     typingIdx++; 
   } else{ if(liIndex<liLength-1){
     //다음문장으로  가기위해 인덱스를 1증가
       liIndex++; 
     //다음문장을 타이핑하기위한 셋팅
        typingIdx=0;
        typingBool = false; 
        typingTxt = $(".typing-txt>ul>li").eq(liIndex).text(); 
       
     //다음문장 타이핑전 1초 쉰다
         clearInterval(tyInt);
          //타이핑종료
     
         setTimeout(function(){
           //1초후에 다시 타이핑 반복 시작
           tyInt = setInterval(typing,100);
         },1000);
        } else if(liIndex==liLength-1){
          
         //마지막 문장까지 써지면 반복종료
           clearInterval(tyInt);
        }
    } 
}  

</script>  



</html>